## julep.ai monorepo

### Workflow for local dev

- Create required `.env` files
- `docker compose up -d` to start the service in the background
- `docker compose watch` to auto rebuild services when files are updated
- `docker compose logs -f {service_name}... ` to watch logs

### Workflow for autogenerated stuff

#### spec flow:
- author agents openapi spec (on apigit)
- convert to yaml and save in the root of monorepo
- openai's swagger spec is used directly for model api spec

#### sdk generate flow:
- fern uses the same openapi spec
- run fern generate
- the generated files are not formatted correctly so run formatters:
  + `npx prettier -w src` for js sdk
  + `poetry run black .` for python sdk

#### agents-api flow:
- uses the openapi.yaml file in root for generating req/resp types
- uses datamodel-code-generator
- run `poe codegen` to use it
- it's not perfect, needs minor modifications to the generated code

#### python sdk testing:
- uses prism for mocking the openapi server
- unfortunately, it doesn't support adding a custom prefix at this time
- so you need to copy `openapi.yaml` from root to `sdks/python/tests/mock_openapi.yaml`
- and then edit all endpoints to add prefix `/api/`

#### python sdk docs:
- from the custom + autogenerated code
- uses handsdown
- run `poe doc`
- it'll render markdown inside the gitbook/ directory in root

#### js sdk docs:
- uses typedoc
- run `npm run docs`

[agents openapi spec](https://github.com/julep-ai/monorepo/blob/main/openapi.yaml)
